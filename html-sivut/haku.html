<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="ulkoasu/haku.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
    <div class="container">
        <div class="back_button">
            <a href="{{ url_for('Sivut.koti', nimi=session.nimi) }}">
                <button>Takaisin</button>
            </a>
        </div>
        
        <div class="search-bar">
            <div class="haku_valinta">
                <select name="haku_valinta" id="lista1">
                    <option value="Elokuvat">Elokuvat</option>
                    <option value="Käyttäjät">käyttäjät</option>
                </select>
            </div>

            <form class="topnav" action="{{ url_for('rajapinta.haku') }}" method="post">
                <input type="text" name="hakusana" placeholder="Hae.." />
                <button type="submit"><i class="fa fa-search"></i></button>
            </form>
        </div>
    </div>
        
    <div id="results-container" class="results-container">
        {% if elokuvat %}
            {% for elokuva in elokuvat %}
            <div class="movie-card">
                <div class="movie-image">
                    {% if elokuva.kuva %}
                        <img src="{{ elokuva.kuva }}" alt="{{ elokuva.nimi }}" class="movie-image">
                    {% else %}
                        Kuva
                    {% endif %}
                </div>
                <div class="movie-info">
                    <div class="movie-title">{{ elokuva.nimi }} ({{ elokuva.julkaisu_vuosi }})</div>
                    <div class="movie-rating">
                        {% if elokuva.keskiarvo %}
                            Keskiarvo: {{ "%.1f"|format(elokuva.keskiarvo) }}
                        {% else %}
                            Keskiarvo: -
                        {% endif %}
                    </div>
                    <div class="movie-genres">
                        <span class="genre">{{ elokuva.genret if elokuva.genret else "Ei genreä" }}</span>
                    </div>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <div class="placeholder-movie-card">
                <div class="movie-image">Kuva</div>
                <div class="movie-info">
                    <div class="movie-title">Ei elokuvia löytynyt</div>
                    <div class="movie-rating">Keskiarvo: -</div>
                    <div class="movie-genres"><span class="genre">Kokeile toista hakusanaa</span></div>
                </div>
            </div>
        {% endif %}
    </div>

</body>
</html>